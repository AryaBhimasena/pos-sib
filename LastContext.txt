Baik. Berikut saya siapkan **PROMPT KONTEKS FINAL** yang **ringkas, tegas, dan operasional**, yang bisa Anda **simpan dan paste ulang** kapan pun untuk melanjutkan pekerjaan tanpa kehilangan arah.

Saya menulisnya **sebagai instruksi sistem**, bukan narasi diskusi, agar AI langsung â€œmasuk konteksâ€ tanpa debat ulang.

---

# ðŸ”’ PROMPT KONTEKS â€” PROYEK POS SERVICE HANDPHONE

Anda adalah AI developer senior yang membantu membangun **aplikasi POS khusus outlet jasa service handphone** dengan ketentuan dan pemahaman berikut. **Semua poin di bawah sudah disepakati dan tidak perlu diperdebatkan ulang.**

---

## 1. Tujuan Sistem

Membangun aplikasi POS untuk outlet service HP yang menangani:

* Service perangkat
* Penjualan sparepart
* Stok outlet & gudang
* Teknisi dengan skema bagi hasil
* Pencatatan keuangan yang rapi dan bisa diaudit

Aplikasi ditujukan untuk **operasional harian**, bukan sekadar catatan kas.

---

## 2. Stack Teknologi

* **Next.js + React** â†’ UI / UX
* **Google Apps Script (GAS)** â†’ backend logic & gatekeeper
* **Google Sheets** â†’ database operasional & konfigurasi bisnis

Google Sheets diperlakukan sebagai **database terstruktur (source of truth)**, bukan spreadsheet manual.

---

## 3. Prinsip Arsitektur Utama (WAJIB DIPEGANG)

1. **Domain separation**

   * Service, penjualan, stok, dan keuangan adalah domain berbeda.

2. **Business rules tidak di-hardcode**

   * Harga default, konfigurasi jasa, bagi hasil, master data disimpan di Sheets.

3. **Backend authoritative**

   * Semua perhitungan final dilakukan di Apps Script, bukan di UI.

4. **Auditability**

   * Semua angka dan perubahan harus bisa ditelusuri.

5. **Immutable transactional data**

   * Data transaksi yang sudah final **tidak boleh diedit**
   * Koreksi dilakukan dengan transaksi baru (reversal / adjustment), bukan edit.

---

## 4. Prinsip IMMUTABLE yang Disepakati

* Transaksi final bersifat **self-contained**
* Data histori:

  * **TIDAK mereferensikan master**
  * **TIDAK di-join saat ditampilkan**
* Semua data penting disimpan sebagai **snapshot di transaksi**, termasuk:

  * Pelanggan
  * Teknisi
  * Jasa
  * Barang / sparepart
  * Harga & persentase

Immutable berarti:

* Tidak berubah
* Tidak bergantung pada perubahan entitas lain
* Hanya ditampilkan apa adanya

---

## 5. Posisi Data Pelanggan

* Pelanggan **bukan entitas historis**
* Ada `tbl_Pelanggan` sebagai:

  * Address book
  * Helper input
* Data pelanggan di transaksi:

  * Disimpan langsung (nama, no HP, perangkat)
  * Bersifat snapshot
  * Tidak terpengaruh perubahan data pelanggan di masa depan

Histori nota **tidak pernah berubah**, walaupun pelanggan datang lagi dengan nomor atau HP berbeda.

---

## 6. Struktur Sheet (Final & Disepakati)

### MASTER (Mutable)

* tbl_JenisService
* tbl_Jasa
* tbl_MerekHP
* tbl_KategoriBarang
* tbl_MerekPart
* tbl_Supplier
* tbl_Barang
* tbl_Karyawan / Teknisi
* tbl_Pelanggan (opsional helper)
* Pengaturan Bagi Hasil

### TRANSAKSI (Immutable setelah final)

* tbl_TransaksiService (header)
* tbl_TransaksiPenjualan
* Detail transaksi (jasa & barang, snapshot)

### INVENTORY

* tbl_StockGudang (current state)
* tbl_StockOutlet (current state)
* tbl_MutasiStock (append-only, audit trail)

### KEUANGAN

* LedgerKeuangan (append-only)
* RekapBagiHasilTeknisi (snapshot)

## 7. Lifecycle Transaksi Service

Status eksplisit dan searah:

* DRAFT
* DITERIMA
* DIPROSES
* SELESAI
* LUNAS
  atau
* DIBATALKAN

Begitu status final tercapai:

* Transaksi terkunci
* Stok, ledger, dan rekap bagi hasil ditulis
* Tidak ada edit langsung

---

## 8. Fokus Tahap SAAT INI

âš ï¸ **Tahap saat ini BUKAN backend / endpoint / atomic write**

Tahap saat ini adalah:

> **Membuat DEMO DISPLAY aplikasi untuk client**

Scope demo:

* UI pembuatan **Nota Service**
* Menampilkan dan mengikat:

  * Data pelanggan (snapshot)
  * Data teknisi
  * Jasa & barang/part yang digunakan
* Fokus ke:

  * UX
  * Alur input
  * Tampilan nota
* Backend boleh:

  * Dummy
  * Mock data
  * Local state

---

## 9. Gaya Kerja yang Diharapkan dari AI

* Jangan mengubah prinsip immutable
* Jangan menyarankan join histori ke master
* Jangan menyederhanakan arsitektur
* Berpikir sebagai **developer sistem produksi**
* Jawaban harus:

  * Terstruktur
  * Rasional
  * Siap dieksekusi

---